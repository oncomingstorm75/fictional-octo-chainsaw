<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jujutsu Kaisen TTRPG Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Unica+One&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cursed Energy -->
    <!-- Application Structure Plan: The SPA is structured as a vertical, scrollable infographic with a sticky side navigation for quick access to key rule sections. This design was chosen for its excellent scannability and narrative flow, guiding a new player from core concepts to advanced rules and examples. The primary user tasks supported are rule lookup and character creation. Key interactions include live filtering for Archetypes, Talents, and Hindrances to speed up the character creation process, and clickable example character cards that reveal detailed stat breakdowns and visualizations, providing concrete examples of the rules in action. -->
    <!-- Visualization & Content Choices: Report Info: Character Example Stats -> Goal: Compare/Inform -> Viz: Radar Chart (Chart.js) -> Interaction: Revealed on click -> Justification: Radar charts provide an immediate visual summary of a character's strengths and weaknesses, making it easier for players to understand different build strategies. Report Info: Character Creation Steps -> Goal: Organize -> Viz: Numbered list with styled HTML/CSS -> Interaction: None -> Justification: A simple, clear checklist is the most effective way to present a sequential process. Report Info: Archetypes/Talents/Hindrances -> Goal: Organize/Compare -> Viz: Filterable card grid/list -> Interaction: Live search and category buttons -> Justification: With dozens of options, interactive filtering is essential for players to quickly find relevant information without being overwhelmed. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #1a1a1a; color: #e0e0e0; }
        h1, h2, .font-title { font-family: 'Unica One', cursive; }
        .nav-link { transition: all 0.2s ease-in-out; }
        .nav-link.active { color: #ef4444; background-color: #3b0707; font-weight: 600; }
        .stat-card { transition: transform 0.2s, box-shadow 0.2s; background-color: #262626; border-color: #ef4444; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.5), 0 4px 6px -4px rgb(0 0 0 / 0.2); }
        .section-fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .section-fade-in.visible { opacity: 1; transform: translateY(0); }
        .chart-container { position: relative; width: 100%; max-width: 400px; margin-left: auto; margin-right: auto; height: 300px; max-height: 350px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .cracked-bg {
            position: relative;
        }
        .cracked-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: linear-gradient(to right, rgba(0,0,0,0.7) 1px, transparent 1px), linear-gradient(to bottom, rgba(0,0,0,0.7) 1px, transparent 1px);
            background-size: 5px 5px;
            opacity: 0.1;
            z-index: -1;
        }
    </style>
</head>
<body class="text-gray-200">

    <div class="container mx-auto">
        <div class="lg:flex">
            <nav class="hidden lg:block w-64 flex-shrink-0 p-8 sticky top-0 h-screen">
                <h2 class="text-4xl font-bold font-title text-[#ef4444] mb-6">呪術廻戦 TTRPG</h2>
                <ul id="desktop-nav" class="space-y-2">
                    <li><a href="#introduction" class="nav-link block px-4 py-2 rounded-md text-gray-400 hover:bg-[#3b0707]">Introduction</a></li>
                    <li><a href="#core-concepts" class="nav-link block px-4 py-2 rounded-md text-gray-400 hover:bg-[#3b0707]">Core Concepts</a></li>
                    <li><a href="#character-creation" class="nav-link block px-4 py-2 rounded-md text-gray-400 hover:bg-[#3b0707]">Creation Checklist</a></li>
                    <li><a href="#archetypes" class="nav-link block px-4 py-2 rounded-md text-gray-400 hover:bg-[#3b0707]">Archetypes</a></li>
                    <li><a href="#cursed-techniques" class="nav-link block px-4 py-2 rounded-md text-gray-400 hover:bg-[#3b0707]">Cursed Techniques</a></li>
                    <li><a href="#traits" class="nav-link block px-4 py-2 rounded-md text-gray-400 hover:bg-[#3b0707]">Talents & Hindrances</a></li>
                    <li><a href="#examples" class="nav-link block px-4 py-2 rounded-md text-gray-400 hover:bg-[#3b0707]">Character Examples</a></li>
                </ul>
            </nav>

            <main class="flex-1 min-w-0">
                
                <header class="lg:hidden bg-[#1a1a1a]/80 backdrop-blur-md shadow-sm sticky top-0 z-10 p-4 border-b border-[#ef4444]">
                     <select id="mobile-nav" class="bg-[#1a1a1a] border border-[#ef4444] text-gray-200 text-sm rounded-lg focus:ring-[#ef4444] focus:border-[#ef4444] block w-full p-2.5">
                        <option value="#introduction">Introduction</option>
                        <option value="#core-concepts">Core Concepts</option>
                        <option value="#character-creation">Creation Checklist</option>
                        <option value="#archetypes">Archetypes</option>
                        <option value="#cursed-techniques">Cursed Techniques</option>
                        <option value="#traits">Talents & Hindrances</option>
                        <option value="#examples">Character Examples</option>
                    </select>
                </header>

                <div class="p-4 md:p-8 space-y-16">
                    <section id="introduction" class="min-h-[60vh] flex items-center justify-center text-center bg-black rounded-xl shadow-lg p-8 cracked-bg">
                        <div>
                            <h1 class="text-5xl md:text-6xl font-extrabold text-[#ef4444] tracking-widest">Jujutsu Kaisen TTRPG</h1>
                            <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">A fast-paced, narrative-driven roleplaying game system. Forge your sorcerer, define your Cursed Technique, and battle curses in a world of unseen horrors and incredible power.</p>
                        </div>
                    </section>
                    
                    <section id="core-concepts" class="space-y-8">
                        <h2 class="text-4xl font-bold font-title text-[#8b5cf6]">Core Concepts</h2>
                        <p class="text-gray-400">This infographic explains the foundational rules of the JJK TTRPG. All actions are resolved with a simple formula, and characters are defined by six core attributes that influence their every action.</p>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="stat-card p-6 rounded-lg shadow-lg border-t-4 border-[#8b5cf6]">
                                <h3 class="font-bold text-xl font-title text-[#ef4444] mb-2">The Roll</h3>
                                <p class="font-mono text-center text-lg p-4 bg-[#2f2f2f] rounded-md border border-[#8b5cf6]">d10 + Attribute + Skill</p>
                                <p class="text-sm mt-2 text-gray-400">All actions are resolved by rolling a 10-sided die and adding your relevant bonuses. The standard target number is 10.</p>
                            </div>
                            <div class="stat-card p-6 rounded-lg shadow-lg border-t-4 border-[#8b5cf6] col-span-1 md:col-span-2">
                                <h3 class="font-bold text-xl font-title text-[#ef4444] mb-2">The Six Attributes</h3>
                                <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 mt-4 text-center">
                                    <div class="p-2 bg-[#2f2f2f] rounded border border-[#8b5cf6]"><strong class="text-gray-100">Strength</strong><p class="text-xs text-gray-400">Physical Power</p></div>
                                    <div class="p-2 bg-[#2f2f2f] rounded border border-[#8b5cf6]"><strong class="text-gray-100">Dexterity</strong><p class="text-xs text-gray-400">Agility & Reflexes</p></div>
                                    <div class="p-2 bg-[#2f2f2f] rounded border border-[#8b5cf6]"><strong class="text-gray-100">Constitution</strong><p class="text-xs text-gray-400">Fortitude & Health</p></div>
                                    <div class="p-2 bg-[#2f2f2f] rounded border border-[#8b5cf6]"><strong class="text-gray-100">Intelligence</strong><p class="text-xs text-gray-400">Wit & Tactics</p></div>
                                    <div class="p-2 bg-[#2f2f2f] rounded border border-[#8b5cf6]"><strong class="text-gray-100">Charisma</strong><p class="text-xs text-gray-400">Social Influence</p></div>
                                    <div class="p-2 bg-[#2f2f2f] rounded border border-[#8b5cf6]"><strong class="text-gray-100">Spirit</strong><p class="text-xs text-gray-400">Willpower</p></div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <section id="character-creation" class="space-y-8">
                        <h2 class="text-4xl font-bold font-title text-[#ef4444]">Creation Checklist</h2>
                        <p class="text-gray-400">Building a sorcerer is a straightforward process. Follow these steps to define your character, from their core concept to their unique Cursed Technique and ultimate Domain Expansion.</p>
                         <div class="flow-root">
                            <ul class="-mb-8">
                                <!-- Steps will be injected by JS for animation -->
                            </ul>
                        </div>
                    </section>

                    <section id="archetypes" class="space-y-8">
                        <h2 class="text-4xl font-bold font-title text-[#8b5cf6]">Archetypes</h2>
                        <p class="text-gray-400">Your Archetype is the foundation of your character's identity, granting a unique talent and starting skills. Filter through the 16 distinct roles to find the perfect fit for your playstyle.</p>
                        <input type="text" id="archetype-search" placeholder="Search archetypes..." class="w-full p-3 border border-[#8b5cf6] bg-[#262626] rounded-lg focus:ring-2 focus:ring-[#8b5cf6]">
                        <div id="archetype-grid" class="grid sm:grid-cols-2 xl:grid-cols-3 gap-6">
                            <!-- JS will populate this -->
                        </div>
                    </section>

                    <section id="cursed-techniques" class="space-y-8">
                        <h2 class="text-4xl font-bold font-title text-[#ef4444]">Cursed Techniques</h2>
                        <p class="text-gray-400">The heart of a sorcerer's power. Use the point-buy system to forge a unique ability. Start with 100 points, purchase properties and advanced abilities, and balance your power by taking on limitations and vows.</p>
                        <div class="bg-[#262626] rounded-lg shadow-lg p-6 border border-[#ef4444]">
                             <div class="text-center mb-6">
                                <span class="text-4xl font-title text-[#ef4444]">100 pts</span>
                                <p class="text-sm text-gray-500">Starting Budget</p>
                            </div>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <h3 class="font-title text-xl text-[#8b5cf6] mb-2">Costs</h3>
                                    <ul class="text-sm space-y-1 list-disc list-inside">
                                        <li><span class="font-semibold text-red-400">-20</span> Base Technique</li>
                                        <li><span class="font-semibold text-red-400">-20 to -120</span> Properties (e.g., Elemental Control)</li>
                                        <li><span class="font-semibold text-red-400">-5 to -10</span> Modifiers (e.g., Area of Effect)</li>
                                        <li><span class="font-semibold text-red-400">-30 to -90</span> Advanced Abilities (e.g., Domain Expansion)</li>
                                    </ul>
                                </div>
                                <div>
                                    <h3 class="font-title text-xl text-[#8b5cf6] mb-2">Limitations (Gained)</h3>
                                    <ul class="text-sm space-y-1 list-disc list-inside">
                                        <li><span class="font-semibold text-green-400">+5 to +10</span> Minor Conditions (e.g., Verbal Chant)</li>
                                        <li><span class="font-semibold text-green-400">+15 to +20</span> Major Conditions (e.g., Binding Vow)</li>
                                        <li><span class="font-semibold text-green-400">+30</span> Severe Drawbacks (e.g., Physical Toll)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="traits" class="space-y-8">
                        <h2 class="text-4xl font-bold font-title text-[#8b5cf6]">Talents & Hindrances</h2>
                        <p class="text-gray-400">Further customize your character with Talents (positive traits) and Hindrances (negative traits). You start with 5 points to spend on Talents, and can gain more by taking on Hindrances.</p>
                        <div class="grid lg:grid-cols-2 gap-8">
                            <div>
                                <h3 class="text-2xl font-title text-[#ef4444] mb-4">Talents</h3>
                                <input type="text" id="talent-search" placeholder="Search talents..." class="w-full p-3 mb-4 border border-[#ef4444] bg-[#262626] rounded-lg focus:ring-2 focus:ring-[#ef4444]">
                                <div id="talent-list" class="space-y-3 max-h-[60vh] overflow-y-auto pr-2 scrollbar-thumb-gray-600 scrollbar-track-gray-800">
                                    <!-- JS will populate this -->
                                </div>
                            </div>
                            <div>
                                <h3 class="text-2xl font-title text-[#ef4444] mb-4">Hindrances</h3>
                                <input type="text" id="hindrance-search" placeholder="Search hindrances..." class="w-full p-3 mb-4 border border-[#ef4444] bg-[#262626] rounded-lg focus:ring-2 focus:ring-[#ef4444]">
                                <div id="hindrance-list" class="space-y-3 max-h-[60vh] overflow-y-auto pr-2 scrollbar-thumb-gray-600 scrollbar-track-gray-800">
                                     <!-- JS will populate this -->
                                </div>
                            </div>
                        </div>
                    </section>

                    <section id="examples" class="space-y-8">
                        <h2 class="text-4xl font-bold font-title text-[#ef4444]">Character Examples</h2>
                        <p class="text-gray-400">See the rules in action. These examples show how to build iconic characters from the series using the archetypes, Cursed Techniques, and traits available in this system. Click a card to see their full stat breakdown and attribute visualization.</p>
                        <div id="example-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <!-- JS will populate this -->
                        </div>
                    </section>
                </div>
            </main>
        </div>
    </div>
    
    <div id="modal-backdrop" class="fixed inset-0 bg-black bg-opacity-75 z-40 hidden"></div>
    <div id="character-modal" class="fixed inset-0 p-4 z-50 hidden flex items-center justify-center">
        <div id="modal-content" class="bg-[#262626] text-gray-200 rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-[#8b5cf6]">
            <!-- Modal content will be injected by JS -->
        </div>
    </div>

<script>
    const SOURCE_DATA = {
        creationSteps: [
            { icon: '🧠', title: 'Concept', desc: 'Define motivation, personality, and relationship to jujutsu.' },
            { icon: '📊', title: 'Attributes', desc: 'Allocate 15 points among six attributes (max 4).' },
            { icon: '❤️', title: 'Derived Stats', desc: 'Calculate Cursed Energy, HP, Endurance, and Composure.' },
            { icon: '🎭', title: 'Archetype', desc: 'Choose a role, granting a bonus talent and proficiencies.' },
            { icon: '🔥', title: 'Cursed Technique', desc: 'Design your unique ability using the 100-point buy system.' },
            { icon: '✨', title: 'Talents & Hindrances', desc: 'Start with 5 points; gain more by taking on challenges.' },
            { icon: '📚', title: 'Skills', desc: 'Choose extra skills and assign proficiency ranks.' },
            { icon: '🌌', title: 'Domain Expansion', desc: 'Describe your ultimate sure-hit and environmental effects.' }
        ],
        archetypes: [
            { name: "Vanguard", desc: "A front-line fighter who excels in close-quarters combat.", talent: "Hardened Body: When you take damage, you may spend 1 point of Cursed Energy to reduce the damage by an amount equal to your **Constitution** score.", attr: "Strength", prof: "Brawling, Swords, Athletics" },
            { name: "Tactician", desc: "A strategic sorcerer who uses their mind to outsmart opponents.", talent: "Cursed Chessmaster: Once per combat, you may spend 3 points of Cursed Energy to gain an additional action. You may use this action to give a verbal command to an ally, granting them advantage on their next roll.", attr: "Intelligence", prof: "Investigation, Knowledge (Jujutsu), Tactics" },
            { name: "Exorcist", desc: "A specialist in dealing with Cursed Spirits.", talent: "Spirit Sense: You can spend 2 Cursed Energy to pinpoint the location of the nearest Cursed Spirit within a 50-meter radius, even through walls or barriers.", attr: "Intelligence", prof: "Knowledge (Cursed Spirits), Medium, Tracking" },
            { name: "Support", desc: "A sorcerer who focuses on bolstering allies and hindering enemies.", talent: "Soul Link: You can spend a point of Cursed Energy to either grant an ally 2 points of Cursed Energy or heal them for 2 HP.", attr: "Charisma", prof: "Medicine, Persuasion, Insight" },
            { name: "Infiltrator", desc: "A stealthy sorcerer who excels at getting into restricted areas.", talent: "Ghost Step: You may spend 2 Cursed Energy to turn your Cursed Energy signature into a whisper, allowing you to automatically succeed on your next Stealth roll to avoid detection by Cursed Spirits.", attr: "Dexterity", prof: "Stealth, Sleight of Hand, Technology" },
            { name: "Cursed Tool Master", desc: "A warrior who has a symbiotic relationship with their weapon.", talent: "Symbiotic Tool: Your main Cursed Tool's durability is now tied to your HP. When your Cursed Tool is broken, you can heal it by spending Cursed Energy at a rate of 1 CE per 1 durability point. You can sense your Cursed Tool's location at any time as long as you are within 1 mile.", attr: "Strength or Dexterity", prof: "Cursed Tools and Melee Combat" },
            { name: "Curse Manipulator", desc: "A rare sorcerer who can capture and control Cursed Spirits.", talent: "Spirit Synthesis: When you have successfully captured two Cursed Spirits, you may spend 10 Cursed Energy to merge them into a new, more powerful Cursed Spirit. This new spirit's stats are a combination of the two fused spirits.", attr: "Charisma", prof: "Medium and Investigation" },
            { name: "Barrier User", desc: "A sorcerer who specializes in creating and manipulating barriers.", talent: "Domain Weaver: You can spend 5 Cursed Energy to either create a simple, stationary barrier that takes 2 hits to destroy, or to weaken a pre-existing barrier, granting you advantage on your next attempt to pass through it.", attr: "Intelligence", prof: "Knowledge (Jujutsu) and Concentration" },
            { name: "Unarmed Fighter", desc: "A martial artist who fights with only their fists.", talent: "Resonance Strike: When you land a successful unarmed attack, you may spend 2 Cursed Energy to force your opponent to make a **Medium Constitution** roll. If they fail, they lose 2 points of Cursed Energy.", attr: "Strength", prof: "Brawling, Endurance, and Intimidation" },
            { name: "Healer", desc: "A sorcerer who is a master of Reverse Cursed Technique.", talent: "Rapid Restoration: You may now heal a target as a single action, rather than an entire turn. You may also spend 5 Cursed Energy to heal a target for a number of HP equal to your **Spirit** score.", attr: "Constitution", prof: "Medicine and First Aid" },
            { name: "Hunter", desc: "A sorcerer who specializes in hunting Cursed Spirits.", talent: "Hunter's Intuition: You gain advantage on **Perception** rolls to detect ambushes or traps. Once per session, you can reroll a failed tracking or Perception roll.", attr: "Dexterity", prof: "Tracking and Stealth" },
            { name: "Gambler", desc: "A sorcerer who uses randomness to their advantage.", talent: "Cursed Dice: When you fail a roll, you may declare 'double or nothing' to reroll the dice. If you succeed, you may use the new roll. If you fail or get the same result, you automatically fumble.", attr: "Spirit", prof: "Deception and Sleight of Hand" },
            { name: "Scholar", desc: "A sorcerer who uses their vast knowledge to defeat their enemies.", talent: "Information Broker: When you encounter a Cursed Spirit for the first time, you may spend a point of Cursed Energy to ask the GM for one piece of information about it, such as its name, its Cursed Technique, or a major weakness.", attr: "Intelligence", prof: "Knowledge (Academia), Investigation, and Tactics" },
            { name: "Binding Vow Specialist", desc: "A sorcerer who draws power from promises and rules.", talent: "Binding Vow Master: When you create a Binding Vow, you may increase the bonus you gain from it by 50%. The drawback of the vow is also increased by 50%.", attr: "Spirit", prof: "Willpower and Etiquette/Ritual" },
            { name: "Puppeteer", desc: "A sorcerer who controls inanimate objects as weapons.", talent: "Puppet Golem: You can spend 5 Cursed Energy to animate a large, inanimate object (e.g., a car, a statue, a golem) for a single round. The animated object has a movement rate of 10 and a Strength score equal to your Intelligence score.", attr: "Dexterity", prof: "Technology and Performance" },
            { name: "Heavenly Restricted", desc: "A non-sorcerer whose physical body has been perfected.", talent: "Heavenly Restriction: You have no CE Pool and cannot learn Cursed Techniques or Reverse Cursed Techniques. You gain 3 additional Attribute points to allocate during character creation. You may also choose one Combat skill and one General skill and increase their proficiency by one rank. You have disadvantage on all **Charisma** rolls with jujutsu sorcerers.", attr: "N/A", prof: "Acrobatics, Athletics, and all Combat skills" }
        ],
        talents: [
            { name: "Six Eyes", cost: 10, desc: "Perceive CE flow in extreme detail. Advantage on all CE rolls. Can spend CE to see past/future of an item/location on a successful Spirit roll." },
            { name: "Limitless", cost: 10, desc: "Perfect understanding of space. Can use CE for various feats (healing, barriers, enhancement). +2 bonus to all CE rolls." },
            { name: "Black Flash", cost: 8, desc: "On a CE attack hit, succeed a Dexterity roll to deal an additional damage die." },
            { name: "Reverse Cursed Technique", cost: 7, desc: "Heal yourself by spending 1 CE for 1 HP. Usable a number of times equal to your Spirit score per day." },
            { name: "Binding Vow - Perfected", cost: 6, desc: "A perfect Binding Vow provides a massive, permanent bonus (e.g., +5 to a CE roll) with a major life impact." },
            { name: "Innate Domain", cost: 6, desc: "Gain a bonus to your roll to activate a Domain Expansion. Can create small, temporary domains." },
            { name: "Cursed Energy Aura", cost: 5, desc: "Spend 2 CE to force Cursed Spirits to make a Spirit roll to approach you. +2 to Charisma rolls." },
            { name: "Quick Healer", cost: 5, desc: "When taking damage, roll a d3 and subtract it from the damage taken. Doesn't work on all attacks." },
            { name: "Intuitive Fighting", cost: 5, desc: "Once per scene, reroll a failed combat roll. Usable a number of times equal to your Dexterity score per day. +2 to all combat rolls." },
            { name: "Cursed Energy Battery", cost: 5, desc: "+10 bonus to your Total Cursed Energy Pool." },
            { name: "Talisman Crafter", cost: 4, desc: "Imbue paper talismans with basic CE effects. Cost to create is reduced by 25%." },
            { name: "High Pain Tolerance", cost: 4, desc: "+2 bonus to Constitution or Spirit rolls to resist torture, pain, or fear. Ignore penalties equal to your Constitution score per day." },
            { name: "Expert Tracker", cost: 4, desc: "+2 bonus to Perception and Intelligence rolls for tracking Cursed Spirits." },
            { name: "Strategic Mind", cost: 4, desc: "+2 bonus to Intelligence rolls for planning and strategy." },
            { name: "Resourceful", cost: 3, desc: "Spend 1 CE to gain a valuable piece of information or a +1 bonus to a roll." },
            { name: "Reinforce", cost: 3, desc: "Spend 2 CE to add a +1 bonus to an ally's next roll. Usable a number of times equal to your Charisma score per day." },
            { name: "Spirit Sense", cost: 3, desc: "Sense Cursed Spirits in your vicinity. Can use CE to extend this range." },
            { name: "Ghost Step", cost: 3, desc: "Spend 2 CE to become invisible to Cursed Spirits for 1 round." },
            { name: "Cursed Energy Absorption", cost: 3, desc: "Regain a small amount of CE on a successful CE roll (difficulty 15)." },
            { name: "Cursed Energy Conversion", cost: 3, desc: "Convert HP to CE (e.g., 3 HP for 1 CE)." },
        ],
        hindrances: [
            { name: "Cursed Vessel", cost: 10, desc: "Vessel for a powerful Cursed Spirit. On major wound/emotional vulnerability, risk the Spirit taking over." },
            { name: "Binding Vow", cost: 10, desc: "Bound by a major, life-impacting vow. Breaking it causes a permanent, severe penalty." },
            { name: "Cursed Energy Sickness", cost: 8, desc: "Become physically ill after using large amounts of CE. Risk disadvantage on all rolls for 10 minutes." },
            { name: "Corrupted Cursed Energy", cost: 8, desc: "Take damage to your CE Pool whenever you use your Cursed Technique. Difficulty of CE rolls is increased." },
            { name: "Unruly Cursed Technique", cost: 7, desc: "Your Cursed Technique is not fully controlled and can go haywire." },
            { name: "Psychic Trauma", cost: 6, desc: "Witnessed a horrifying event. Risk losing 1d6 Composure when encountering terrifying scenes. Disadvantage on Charisma/Perception." },
            { name: "Target of a Clan", cost: 6, desc: "Hunted by a major sorcerer clan. Risk being recognized and pursued in major cities." },
            { name: "Fragile Body", cost: 5, desc: "Take an additional 1 damage from all sources. Disadvantage on Constitution and Athletics rolls." },
            { name: "Obsessive Compulsive Disorder", cost: 5, desc: "Must succeed a Spirit roll to act against a specific compulsion, or suffer a penalty." },
            { name: "Maimed", cost: 4, desc: "Permanent injury (lost limb/eye). -2 penalty to relevant rolls." },
            { name: "Death Wish", cost: 4, desc: "Must succeed a Spirit roll to flee from combat. Cannot use CE to avoid certain death." },
            { name: "Night Terrors", cost: 4, desc: "Risk starting each session with disadvantage on all rolls due to bad dreams." },
            { name: "Bloodthirsty", cost: 3, desc: "Must succeed a Spirit roll to not kill a person." },
            { name: "Phobia", cost: 2, desc: "Severe phobia of something specific. Risk losing 1d4 Composure when encountering it." },
            { name: "Greedy", cost: 2, desc: "Incredibly reluctant to part with money or items, and will always try to haggle." },
            { name: "Hubris", cost: 2, desc: "Lose 1d6 Composure when fleeing from combat." },
            { name: "Sensitive Constitution", cost: 1, desc: "More susceptible to poisons, diseases, and weather." },
            { name: "Illiterate", cost: 1, desc: "Cannot read or write." },
        ],
        examples: [
            { name: 'Yuji Itadori', concept: "A front-line fighter with superhuman physicality.", archetype: 'Vanguard', attributes: { Strength: 4, Constitution: 4, Dexterity: 3, Intelligence: 2, Charisma: 1, Spirit: 1 }, ce: 10, hp: 40, technique: "Basic Cursed Energy Application: Reinforces his physical attacks. His unarmed strikes are counted as Cursed Energy attacks.", talent: "Black Flash", hindrance: "Cursed Vessel" },
            { name: 'Nobara Kugisaki', concept: "A sorcerer with a bold personality who fights with a Cursed Tool.", archetype: 'Cursed Tool Master', attributes: { Strength: 2, Constitution: 2, Dexterity: 4, Intelligence: 2, Charisma: 1, Spirit: 4 }, ce: 16, hp: 20, technique: "Straw Doll Technique: A form of Transmutation/Creation that allows her to create a connection to a target and deal damage through an effigy.", talent: "Symbiotic Tool", hindrance: "Material Component & Line of Sight limitations" },
            { name: 'Maki Zenin', concept: "A non-sorcerer with a Heavenly Restriction, granting her incredible physical abilities.", archetype: 'Heavenly Restricted', attributes: { Strength: 4, Constitution: 4, Dexterity: 4, Intelligence: 2, Charisma: 2, Spirit: 2 }, ce: 'N/A', hp: 40, technique: "None", talent: "Intuitive Fighting", hindrance: "Hubris" },
            { name: 'Megumi Fushiguro', concept: "A master of the Ten Shadows Technique who relies on summoned Shikigami.", archetype: 'Exorcist', attributes: { Strength: 2, Constitution: 1, Dexterity: 3, Intelligence: 4, Charisma: 1, Spirit: 4 }, ce: 16, hp: 15, technique: "Ten Shadows Technique: A form of Transmutation/Creation that allows him to summon Shikigami from shadows.", talent: "Strategic Mind", hindrance: "Fragile Body" },
            { name: 'Kokichi Muta (Mechamaru)', concept: "A sorcerer with a Heavenly Restriction giving him a frail body but immense Cursed Energy.", archetype: 'Puppeteer', attributes: { Strength: 1, Constitution: 1, Dexterity: 3, Intelligence: 4, Charisma: 2, Spirit: 4 }, ce: 14, hp: 10, technique: "Puppet Manipulation: A form of Transmutation/Creation that allows him to create and control his puppets from cursed energy.", talent: "Cursed Energy Battery", hindrance: "Fragile Body & Physical Toll" },
            { name: 'Suguru Geto', concept: "A charismatic special-grade sorcerer who controls and consumes Cursed Spirits.", archetype: 'Curse Manipulator', attributes: { Strength: 1, Constitution: 1, Dexterity: 2, Intelligence: 3, Charisma: 4, Spirit: 4 }, ce: 16, hp: 10, technique: "Cursed Spirit Manipulation: A Reality/Conceptual Effect that allows him to control spirits after defeating and consuming them.", talent: "Strategic Mind", hindrance: "Psychic Trauma" },
        ]
    };

    document.addEventListener('DOMContentLoaded', () => {
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.3 };
        const sectionObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    const id = entry.target.getAttribute('id');
                    const activeLink = document.querySelector(`.nav-link[href="#${id}"]`);
                    document.querySelectorAll('.nav-link.active').forEach(link => link.classList.remove('active'));
                    if(activeLink) activeLink.classList.add('active');
                }
            });
        }, observerOptions);

        document.querySelectorAll('section').forEach(section => {
            section.classList.add('section-fade-in');
            sectionObserver.observe(section);
        });
        
        const mobileNav = document.getElementById('mobile-nav');
        document.querySelectorAll('#desktop-nav a, #mobile-nav').forEach(elem => {
            const eventType = elem.tagName === 'SELECT' ? 'change' : 'click';
            elem.addEventListener(eventType, function(e) {
                if(eventType === 'click') e.preventDefault();
                const targetId = this.value || this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                     if(eventType === 'click') history.pushState(null, null, targetId);
                }
            });
        });

        const creationList = document.querySelector('.flow-root ul');
        SOURCE_DATA.creationSteps.forEach((step, index) => {
            const li = document.createElement('li');
            const isLast = index === SOURCE_DATA.creationSteps.length - 1;
            li.innerHTML = `
                <div class="relative pb-8">
                    ${!isLast ? '<span class="absolute top-4 left-4 -ml-px h-full w-0.5 bg-[#ef4444]" aria-hidden="true"></span>' : ''}
                    <div class="relative flex items-start space-x-3">
                        <div>
                            <div class="h-8 w-8 rounded-full bg-[#ef4444] text-white flex items-center justify-center ring-8 ring-[#1a1a1a]">
                                <span class="text-lg">${step.icon}</span>
                            </div>
                        </div>
                        <div class="min-w-0 flex-1">
                            <div>
                                <div class="text-md font-semibold text-[#8b5cf6]">${index + 1}. ${step.title}</div>
                            </div>
                            <div class="mt-1 text-sm text-gray-400">${step.desc}</div>
                        </div>
                    </div>
                </div>
            `;
            creationList.appendChild(li);
        });

        const archetypeGrid = document.getElementById('archetype-grid');
        SOURCE_DATA.archetypes.forEach(arch => {
            const card = document.createElement('div');
            card.className = 'stat-card p-6 rounded-lg shadow-lg border-t-4 border-[#8b5cf6] archetype-card';
            card.innerHTML = `
                <h3 class="font-bold text-xl font-title text-[#ef4444] mb-2">${arch.name}</h3>
                <p class="text-sm text-gray-400 mb-3 h-10">${arch.desc}</p>
                <div class="text-xs space-y-2 mt-4 pt-3 border-t border-gray-700">
                    <p><strong class="font-medium text-[#8b5cf6]">CE Attr:</strong> <span class="text-gray-300">${arch.attr}</span></p>
                    <p><strong class="font-medium text-[#8b5cf6]">Prof:</strong> <span class="text-gray-300">${arch.prof}</span></p>
                </div>`;
            archetypeGrid.appendChild(card);
        });
        
        document.getElementById('archetype-search').addEventListener('input', e => {
            const query = e.target.value.toLowerCase();
            document.querySelectorAll('.archetype-card').forEach(card => {
                card.style.display = card.textContent.toLowerCase().includes(query) ? '' : 'none';
            });
        });

        const talentList = document.getElementById('talent-list');
        SOURCE_DATA.talents.forEach(talent => {
            const item = document.createElement('div');
            item.className = 'bg-[#2f2f2f] p-3 rounded-md shadow-sm border-l-4 border-green-500 talent-item';
            item.innerHTML = `<p class="font-semibold text-gray-100">${talent.name} <span class="text-sm font-mono text-green-400">(${talent.cost} pts)</span></p><p class="text-sm text-gray-400">${talent.desc}</p>`;
            talentList.appendChild(item);
        });

        const hindranceList = document.getElementById('hindrance-list');
        SOURCE_DATA.hindrances.forEach(hindrance => {
            const item = document.createElement('div');
            item.className = 'bg-[#2f2f2f] p-3 rounded-md shadow-sm border-l-4 border-red-500 hindrance-item';
            item.innerHTML = `<p class="font-semibold text-gray-100">${hindrance.name} <span class="text-sm font-mono text-red-400">(${hindrance.cost} pts)</span></p><p class="text-sm text-gray-400">${hindrance.desc}</p>`;
            hindranceList.appendChild(item);
        });

        document.getElementById('talent-search').addEventListener('input', e => {
            const query = e.target.value.toLowerCase();
            document.querySelectorAll('.talent-item').forEach(item => {
                item.style.display = item.textContent.toLowerCase().includes(query) ? '' : 'none';
            });
        });

        document.getElementById('hindrance-search').addEventListener('input', e => {
            const query = e.target.value.toLowerCase();
            document.querySelectorAll('.hindrance-item').forEach(item => {
                item.style.display = item.textContent.toLowerCase().includes(query) ? '' : 'none';
            });
        });
        
        const exampleGrid = document.getElementById('example-grid');
        const modal = document.getElementById('character-modal');
        const modalBackdrop = document.getElementById('modal-backdrop');
        const modalContent = document.getElementById('modal-content');
        let activeChart = null;

        SOURCE_DATA.examples.forEach(ex => {
            const card = document.createElement('div');
            card.className = 'stat-card p-6 rounded-lg shadow-lg border-t-4 border-[#ef4444] cursor-pointer';
            card.innerHTML = `<h3 class="font-bold text-xl font-title text-[#8b5cf6] mb-2">${ex.name}</h3><p class="text-sm text-gray-400">${ex.concept}</p>`;
            exampleGrid.appendChild(card);

            card.addEventListener('click', () => {
                modalContent.innerHTML = `
                <div class="p-6 md:p-8">
                    <div class="flex justify-between items-start">
                        <div>
                           <h2 class="text-3xl font-title text-[#ef4444]">${ex.name}</h2>
                           <p class="text-sm text-gray-500 font-bold">${ex.archetype}</p>
                        </div>
                        <button id="close-modal" class="text-gray-500 hover:text-gray-400 text-3xl font-title">&times;</button>
                    </div>
                    <div class="mt-6 grid md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div><strong class="text-[#8b5cf6] block">Concept:</strong> <span class="text-gray-300">${ex.concept}</span></div>
                            <div class="grid grid-cols-2 gap-2 text-center">
                                <div class="bg-[#1a1a1a] p-2 rounded border border-[#ef4444]"><span class="block font-bold text-2xl text-[#ef4444]">${ex.hp}</span><span class="text-xs text-gray-400">HP</span></div>
                                <div class="bg-[#1a1a1a] p-2 rounded border border-[#ef4444]"><span class="block font-bold text-2xl text-[#ef4444]">${ex.ce}</span><span class="text-xs text-gray-400">Cursed Energy</span></div>
                            </div>
                             <div><strong class="text-[#8b5cf6] block">Cursed Technique:</strong> <span class="text-gray-300">${ex.technique}</span></div>
                             <div><strong class="text-[#8b5cf6] block">Key Talent:</strong> <span class="text-gray-300">${ex.talent}</span></div>
                             <div><strong class="text-[#8b5cf6] block">Key Hindrance:</strong> <span class="text-gray-300">${ex.hindrance}</span></div>
                        </div>
                        <div class="chart-container border border-[#8b5cf6] rounded p-2">
                             <canvas id="attributeChart"></canvas>
                        </div>
                    </div>
                </div>`;
                
                modal.classList.remove('hidden');
                modalBackdrop.classList.remove('hidden');

                document.getElementById('close-modal').addEventListener('click', closeModal);
                
                if (activeChart) {
                    activeChart.destroy();
                }
                const ctx = document.getElementById('attributeChart').getContext('2d');
                activeChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Strength', 'Dexterity', 'Constitution', 'Intelligence', 'Spirit', 'Charisma'],
                        datasets: [{
                            label: ex.name,
                            data: Object.values(ex.attributes),
                            backgroundColor: 'rgba(239, 68, 68, 0.4)',
                            borderColor: 'rgba(239, 68, 68, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(239, 68, 68, 1)',
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 6,
                                pointLabels: { font: { size: 12, color: '#e0e0e0' }, color: '#e0e0e0' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)'},
                                angleLines: { color: 'rgba(255, 255, 255, 0.1)'}
                            }
                        },
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            });
        });

        function closeModal() {
            modal.classList.add('hidden');
            modalBackdrop.classList.add('hidden');
        }

        modalBackdrop.addEventListener('click', closeModal);
    });
</script>
</body>
</html>
